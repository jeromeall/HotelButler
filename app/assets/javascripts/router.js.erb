
var hotelButlerRouter = angular.module("hotelButlerRouter", ["ngRoute"]);


hotelButlerRouter.config(['$routeProvider','$httpProvider','$locationProvider', function($routeProvider, $httpProvider, $locationProvider){
  authToken = $("meta[name=\"csrf-token\"]").attr("content");
  $httpProvider.defaults.headers.common["X-CSRF-TOKEN"] = authToken;
  $routeProvider.
    when("/",
    {
      templateUrl: "<%= asset_path('stays/index.html') %>",
      controller: "stayIndexCtrl"
    }).
    when('/stays/new',{
      templateUrl: "<%= asset_path('stays/new.html') %>",
      controller: "stayCreateCtrl"
    }).
    when('/stays/:id/', {
      templateUrl: "<%= asset_path('stays/show.html') %>",
      controller: "stayShowCtrl",
      // resolve: {
      //   stay: function($route, Stay){
      //     return Phone.get($route.current.params.key);
      //   }
      //}
    }).
    when('/stays/:stay_id/concierge/new', {
      templateUrl: "<%= asset_path('concierge/new.html') %>",
      controller: "conciergeCreateCtrl"
    }).
    when('/stays/:stay_id/housekeeping/new', {
      templateUrl: "<%= asset_path('housekeeping/new.html') %>",
      controller: "housekeepingCreateCtrl"
    }).
    when('/stays/:stay_id/roomservice/new', {
      templateUrl: "<%= asset_path('roomservice/new.html') %>",
      controller: "roomserviceCreateCtrl"
    });
}]);
